CREATE TABLE PELICULA(ID_PELICULA INTEGER, TITULO VARCHAR2(120), DIRECTOR VARCHAR2(120), SINOPSIS VARCHAR2(255),CONSTRAINT PK_ID_PELICULA PRIMARY KEY(ID_PELICULA));  
3 
 
4 
 
5 CREATE TABLE HORARIO(ID_HORARIO INTEGER, ID_PELICULA INTEGER,FECHA DATE, CONSTRAINT PK_ID_HORARIO PRIMARY KEY(ID_HORARIO), CONSTRAINT FK1_ID_PELICULA FOREIGN  KEY(ID_PELICULA) REFERENCES PELICULA (ID_PELICULA)); 
6 
 
7 
 
8 CREATE TABLE SALA(ID_SALA INTEGER, ID_PELICULA INTEGER, ID_HORARIO INTEGER, NUM_ASIENTO INTEGER, CONSTRAINT PK_ID_SALA PRIMARY KEY (ID_SALA),CONSTRAINT FK1_ID_PELICULA FOREIGN KEY(ID_PELICULA) REFERENCES PELICULA (ID_PELICULA), CONSTRAINT FK2_ID_HORARIO FOREIGN KEY(ID_HORARIO) REFERENCES HORARIO(ID_HORARIO));  
9 
 
10 CREATE TABLE REPARTO(ID_REPARTO INTEGER, ID_PELICULA INTEGER, NOMBRE VARCHAR2(100),APELLIDO VARCHAR2(100),CONSTRAINT PK_ID_REPARTO PRIMARY KEY (ID_REPARTO), CONSTRAINT FK1_ID_PELICULA FOREIGN KEY (ID_PELICULA) REFERENCES PELICULA (ID_PELICULA)); 
11 
 
12 
 
13 /* GENERAMOS LA SECUENCIA CORRESPONDIENTE A LA TABLA PELICULA*/ 
14 
 
15 CREATE SEQUENCE SECUENCIA_PELICULA 
16 START WITH 1 
17 INCREMENT BY 1 
18 NOMAXVALUE; 
19 
 
20 CREATE SEQUENCE SECUENCIA_HORARIO 
21 START WITH 1 
22 INCREMENT BY 1 
23 NOMAXVALUE; 
24 
 
25 CREATE SEQUENCE SECUENCIA_SALA 
26 START WITH 1 
27 INCREMENT BY 1 
28 NOMAXVALUE; 
29 
 
30 CREATE SEQUENCE SECUENCIA_REPARTO 
31 START WITH 1 
32 INCREMENT BY 1 
33 NOMAXVALUE; 
34 
 
35 
 
36 CREATE OR REPLACE PROCEDURE GUARDAR_PELICULA(MY_ID_PELICULA OUT INTEGER, MY_TITULO IN VARCHAR2, MY_DIRECTOR IN VARCHAR2, MY_SINOPSIS VARCHAR2, ) 
37 AS  
38 BEGIN 
39 SELECT SECUENCIA_PELICULA.NEXTVAL INTO MY_ID_PELICULA 
40 FROM DUAL; 
41 INSERT INTO PELICULA VALUES(MY_ID_PELICULA,MY_TITULO,MY_DIRECTOR,MY_SINOPSIS); 
42 END; 
43 / 
44 
 
45 DECLARE 
46 VALOR INTEGER; 
47 BEGIN 
48 GUARDAR_PELICULA(VALOR,’HERCULES’,’PEDRITO’,’EL DIOS MAS FUERTE DEL MUNDO BLA BLA’); 
49 DBMS_OUTPUT.PUT_LINE(‘REGISTRO GUARDADO CON ID:||VALOR); 
50 END; 
51 / 
52 
 
53 
 
54 CREATE OR REPLACE PROCEDURE GUARDAR_HORARIO(MY_ID_HORARIO OUT INTEGER, MY_FECHA DATE ) 
55 AS  
56 BEGIN 
57 SELECT SECUENCIA_HORARIO.NEXTVAL INTO MY_ID_HORARIO 
58 FROM DUAL; 
59 INSERT INTO HORARIO VALUES(MY_ID_HORARIO,MY_FECHA); 
60 END; 
61 / 
62 
 
63 DECLARE 
64 VALOR INTEGER; 
65 BEGIN 
66 GUARDAR_HORARIO(VALOR,10/03/14); 
67 DBMS_OUTPUT.PUT_LINE(‘REGISTRO GUARDADO CON ID:||VALOR); 
68 END; 
69 / 
70 
 
71 CREATE OR REPLACE PROCEDURE GUARDAR_SALA(MY_ID_SALA OUT INTEGER, MY_NUM_ASIENTO IN INTEGER) 
72 AS  
73 BEGIN 
74 SELECT SECUENCIA_SALA.NEXTVAL INTO MY_ID_SALA 
75 FROM DUAL; 
76 INSERT INTO SALA VALUES(MY_ID_SALA,MY_NUM_ASIENTO); 
77 END; 
78 / 
79 
 
80 DECLARE 
81 VALOR INTEGER; 
82 BEGIN 
83 GUARDAR_SALA(VALOR,10); 
84 DBMS_OUTPUT.PUT_LINE(‘REGISTRO GUARDADO CON ID:||VALOR); 
85 END; 
86 / 
87 
 
88 CREATE OR REPLACE PROCEDURE GUARDAR_REPARTO(MY_ID_REPARTO OUT INTEGER, MY_NOMBRE IN VARCHAR2, MY_APELLIDO IN VARCHAR2 ) 
89 AS  
90 BEGIN 
91 SELECT SECUENCIA_REPARTO.NEXTVAL INTO MY_ID_REPARTO 
92 FROM DUAL; 
93 INSERT INTO REPARTO VALUES(MY_ID_REPARTO,MY_NOMBRE,MY_APELLIDO); 
94 END; 
95 / 
96 
 
97 DECLARE 
98 VALOR INTEGER; 
99 BEGIN 
100 GUARDAR_REPARTO(VALOR,’CARMEN’,’SALINAS’); 
101 DBMS_OUTPUT.PUT_LINE(‘REGISTRO GUARDADO CON ID:||VALOR); 
102 END; 
103 / 
